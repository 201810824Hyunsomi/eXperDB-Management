<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="myScheduleSql">

	<select id="selectMyScheduleList" resultType="hashMap">
		/**
	 	* Query ID : selectMyScheduleList
	 	* Description :  My스케줄  List 조회
	 	* Author : 변승우
	 	**/
       SELECT 
      		(ROW_NUMBER() OVER()) AS ROWNUM
			, (ROW_NUMBER() OVER()) AS IDX
      		, SCD_ID
			, SCD_NM
            , SCD_EXP
			, EXE_PERD_CD
			, EXE_DT
			, EXE_HMS
			, TO_CHAR(PREV_EXE_DTM,'YYYY-MM-DD HH24:MI:SS') AS PREV_EXE_DTM
			, TO_CHAR(NXT_EXE_DTM,'YYYY-MM-DD HH24:MI:SS') AS NXT_EXE_DTM
			, FRST_REGR_ID
			, TO_CHAR(FRST_REG_DTM,'YYYY-MM-DD HH24:MI:SS') AS FRST_REG_DTM
			, LST_MDFR_ID
			, TO_CHAR(LST_MDF_DTM,'YYYY-MM-DD HH24:MI:SS') AS LST_MDF_DTM
      FROM T_SCD_M
      WHERE 1=1	
      AND LST_MDFR_ID = #{lst_mdfr_id}
      <if test="scd_nm != null and scd_nm != '' ">
      AND SCD_NM LIKE  '%' || #{scd_nm} || '%'
	  </if>
      <if test="scd_exp != null and scd_exp != '' ">
      	AND SCD_EXP LIKE CONCAT('%',#{scd_exp},'%')
      </if>
    </select>	
	
</mapper>
