<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="restoreRmanSql">


	<insert id="insertRmanRestore" parameterType="restoreRmanVO">
		/**
	 	* Query ID : "insertRmanRestore"
	 	* Description : RMAN RESOTRE 등록
	 	* Author : 변승우
	 	**/
	 	INSERT INTO T_RMAN_RESTORE
	 		(
	 		RESTORE_SN
	 		, DB_SVR_ID
	 		, RESTORE_NM
	 		, RESTORE_EXP
	 		, TIMELINE_DT
	 		, TIMELINE_H
	 		, TIMELINE_M
	 		, TIMELINE_S
	 		, DTB_PTH
	 		, PGALOG_PTH
	 		, SVRLOG_PTH	 		
	 		, BCK_PTH
	 		, RESTORE_CNDT
	 		, RESTORE_FLAG
	 		, ASIS_FLAG
	 		, RESTORE_DIR
	 		, EXELOG
	 		, REGR_ID
	 		)
	 		VALUES
	 		(
	 		nextval('Q_RMAN_RESTORE_01')
	 		, #{db_svr_id}
	 		, #{restore_nm}
	 		, #{restore_exp}
	 		, #{timeline_dt}
	 		, #{timeline_h}
			, #{timeline_m}
			, #{timeline_s}
			, #{dtb_pth}
			, #{pgalog_pth}
			, #{svrlog_pth}
	 		, #{bck_pth}
			, #{restore_cndt}
			, #{restore_flag}
			, #{asis_flag}
			, #{restore_dir}
	 		, #{exelog}
	 		, #{regr_id}	
	 		)
	</insert>
	
	<select id="restore_nmCheck" resultType="int">
		/**
		* Query ID : restore_nmCheck
		* Description : 복구명 중복 체크
		* Author : 변승우
		**/
		SELECT 
				 COUNT(*)
		FROM T_RMAN_RESTORE
		WHERE RESTORE_NM = #{restore_nm}
	</select>	
</mapper>
